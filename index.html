<!DOCTYPE html>
<!-- saved from url=(0044)http://getbootstrap.com/examples/dashboard/# -->
<html lang="en">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Restcontrol entity editor</title>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>   
   
    <link href="css/dashboard.css" rel="stylesheet" type="text/css">
 
    <!-- JSON Editor -->
    <link href="jsoneditor/dist/jsoneditor.css" rel="stylesheet" type="text/css">
    <script src="jsoneditor/dist/jsoneditor.js"></script>
        <style type="text/css">
        #jsoneditor {
            width: 800px;
            height: 480px;
            }
        </style>
    <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="">Restcontrol</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="">Help</a></li>
          </ul>
          <form class="navbar-form navbar-right" id="edit">
            <input id= "entity" type="text" class="form-control" placeholder="Edit...">
          </form>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div id="sidebar" class="col-sm-3 col-md-2 sidebar">
            <script>
            var url = 'http://localhost:5000/api/v1/list/domains';
            console.log("Fetching list of domains");
            $.getJSON(url, null, function(data) { 
                var items = [];
                $.each(data['domains'], function (k,item) {
                    var link =  "<a href=\"\">" + item + "</a>" ;
                    items.push( "<li id='" + item + "'>" + link + "</li>" );
                });
                $( "<ul/>", {
                    "class": "nav nav-sidebar",
                    html: items.join( "" )
                }).appendTo( "#sidebar" );
            }).always(function (data) { console.log( data )} );

            </script>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>Entity</th>
                  <th>Host</th>
                  <th>Type</th>
                  <th>Subcategory</th>
                  <th>Header</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><a href="">Appservers</a></td>
                  <td>Lorem</td>
                  <td>ipsum</td>
                  <td>dolor</td>
                  <td>sit</td>
                </tr>
                <tr>
                  <td>1,002</td>
                  <td>amet</td>
                  <td>consectetur</td>
                  <td>adipiscing</td>
                  <td>elit</td>
                </tr>
              </tbody>
            </table>
        </div>
            <div id="jsoneditor">
                <script>
                var API = "http://localhost:5000/api/v1/entities/";

                // create the editor
                var container = document.getElementById("jsoneditor");
                var editor = new JSONEditor(container);

                $( "#edit" ).submit(function ( event ) {
                    event.preventDefault();
                    var entity = $("#entity").val();
                    var url = API + entity;
                    console.log("Fetching: " + entity + " from " + url);
                    $.getJSON(url, null, function(data) { editor.set(data) })
                    .always(function (data) { console.log( data )} );
                  });
                </script>
            </div> <!-- jsoneditor div -->
      </div>
  </div>
    </div>
  
    </body>
</html>
